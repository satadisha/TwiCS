#!/usr/bin/python3

import sys

import matplotlib
import matplotlib.pyplot as plt
from matplotlib.ticker import MaxNLocator
from matplotlib import cm
from mpl_toolkits.mplot3d import Axes3D

import numpy
from numpy.random import randn
from scipy import array, newaxis


# ======
## data:
batch_size_recorder=[]
Z_scores=[-1.0,-0.9,-0.8,-0.7,-0.6,-0.5,-0.4,-0.3,-0.2,-0.1,0,0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9,1.0]
for batch_size_ratio in range(1,50,2):
    batch_size_ratio_float= batch_size_ratio/100.0
    # print(batch_size_ratio_float)
    batch_size=38000*batch_size_ratio_float
    batch_size_recorder.append(batch_size)

# print(batch_size_recorder)
# whole_level = [[[1.0027697086334229, 2.003866195678711, 2.8887386322021484, 3.7783186435699463, 4.816943645477295, 5.933135747909546, 6.495479106903076], [0.8466090122894857, 0.81194409148665825, 0.78521939953810627, 0.7496768634209392, 0.7398642095053346, 0.74955879993582541, 0.75207517619420516], [776, 1615, 2356, 3053, 3828, 4598, 4695]], [[1.074526309967041, 2.1515567302703857, 3.10200572013855, 4.0769922733306885, 5.192828416824341, 6.368303298950195, 6.9770896434783936], [0.8466090122894857, 0.81154822335025367, 0.7849269418097925, 0.7494619027120103, 0.73967823221554563, 0.7493987493987494, 0.75191735795899206], [776, 1615, 2356, 3053, 3828, 4598, 4695]], [[1.1292695999145508, 2.219878911972046, 3.129110336303711, 4.041774749755859, 5.10080885887146, 6.245432376861572, 6.809023857116699], [0.8481818181818181, 0.80833596463530155, 0.78418367346938778, 0.75521498510004248, 0.74428353658536572, 0.75367356612419023, 0.75593952483801297], [776, 1615, 2356, 3053, 3828, 4598, 4695]], [[1.0754055976867676, 2.122593402862549, 3.0631930828094482, 3.989560604095459, 5.092460870742798, 6.263020277023315, 6.851354122161865], [0.8481818181818181, 0.80833596463530155, 0.78263090676883773, 0.75309168443496799, 0.74409675561528121, 0.75397329942784497, 0.75624515128006209], [776, 1615, 2356, 3053, 3828, 4598, 4695]], [[1.0421481132507324, 2.0625460147857666, 2.9812612533569336, 3.9009625911712646, 4.970519781112671, 6.141329526901245, 6.745389223098755], [0.8466090122894857, 0.81194409148665825, 0.78521939953810627, 0.7496768634209392, 0.7398642095053346, 0.74955879993582541, 0.75207517619420516], [776, 1615, 2356, 3053, 3828, 4598, 4695]], [[1.038703203201294, 2.0687084197998047, 2.9891698360443115, 3.9164798259735107, 4.975968599319458, 6.097721815109253, 6.681190252304077], [0.8466090122894857, 0.80987029421069279, 0.78403275332650979, 0.75437847073900044, 0.74538461538461542, 0.75505331847843393, 0.75730267246737115], [776, 1615, 2356, 3053, 3828, 4598, 4695]], [[1.0585904121398926, 2.0683350563049316, 3.0057756900787354, 3.9579598903656006, 5.047058343887329, 6.228332996368408, 6.820012807846069], [0.8466090122894857, 0.80987029421069279, 0.78383218214377082, 0.74817361409540173, 0.73960951092209537, 0.75031969309462909, 0.7528089887640449], [776, 1615, 2356, 3053, 3828, 4598, 4695]], [[1.0631184577941895, 2.1127262115478516, 3.038585901260376, 4.010108947753906, 5.101815700531006, 6.229063272476196, 6.803280830383301], [0.8466090122894857, 0.80987029421069279, 0.78403275332650979, 0.75437847073900044, 0.74538461538461542, 0.75505331847843393, 0.75730267246737115], [776, 1615, 2356, 3053, 3828, 4598, 4695]], [[1.3444764614105225, 2.69736647605896, 3.9337799549102783, 5.209398031234741, 6.609330415725708, 8.051380634307861, 8.970324754714966], [0.852720450281426, 0.81021897810218968, 0.76923076923076938, 0.73909049150206696, 0.72207141365629579, 0.73023578363384178, 0.73271344040574804], [776, 1615, 2356, 3053, 3828, 4598, 4695]], [[1.3361752033233643, 2.6905388832092285, 3.9599483013153076, 5.203052282333374, 6.61882209777832, 8.105420112609863, 9.048518657684326], [0.838150289017341, 0.79303278688524592, 0.74152180108292964, 0.70893371757925072, 0.69435942282466112, 0.70575461454940269, 0.70851701639922415], [776, 1615, 2356, 3053, 3828, 4598, 4695]], [[1.3533790111541748, 2.7189269065856934, 3.9715399742126465, 5.2088141441345215, 6.614216327667236, 8.0615553855896, 8.98595404624939], [0.8141858141858141, 0.77210285311729476, 0.71365378944264235, 0.67367893814174806, 0.66074681238615662, 0.67606163096580241, 0.679480139117701], [776, 1615, 2356, 3053, 3828, 4598, 4695]], [[1.4074766635894775, 2.724287509918213, 3.9590046405792236, 5.171548366546631, 6.507524251937866, 7.914106607437134, 8.78294587135315], [0.8120300751879699, 0.76560827684623611, 0.70185962807438507, 0.660377358490566, 0.64511627906976743, 0.66181539639984666, 0.66542334949645654], [776, 1615, 2356, 3053, 3828, 4598, 4695]], [[1.3119752407073975, 2.62735652923584, 3.8286051750183105, 4.985539436340332, 6.276355743408203, 7.722655773162842, 8.580017805099487], [0.7735655737704917, 0.72880116959064334, 0.66993263931414571, 0.62578288100208768, 0.6089238845144358, 0.62785700332096106, 0.63193916349809887], [776, 1615, 2356, 3053, 3828, 4598, 4695]], [[1.3227248191833496, 2.5950677394866943, 3.7654738426208496, 4.972234487533569, 6.321629524230957, 7.733761310577393, 8.586863994598389], [0.7671657201858544, 0.72352941176470587, 0.66150030998140119, 0.61363033678069467, 0.59490909090909094, 0.61535409640944261, 0.6200772200772201], [776, 1615, 2356, 3053, 3828, 4598, 4695]], [[1.3326520919799805, 2.6794283390045166, 3.90873384475708, 5.0757904052734375, 6.522211074829102, 8.024282455444336, 8.912470817565918], [0.6625352112676057, 0.68417047184170476, 0.62243589743589745, 0.57510259917920659, 0.55924170616113744, 0.5825838103025347, 0.58802466679928389], [776, 1615, 2356, 3053, 3828, 4598, 4695]], [[1.3465757369995117, 2.660688877105713, 3.8569869995117188, 5.061816453933716, 6.398619174957275, 7.809080123901367, 8.67462158203125], [0.6491728465487735, 0.62168674698795179, 0.56788467985249758, 0.5276038702333522, 0.51183355006501952, 0.53976311336717431, 0.54534238124614431], [776, 1615, 2356, 3053, 3828, 4598, 4695]], [[1.325047254562378, 2.6310198307037354, 3.8670780658721924, 5.0806193351745605, 6.436495304107666, 7.915563106536865, 8.82159948348999], [0.6343713956170703, 0.61108862808579523, 0.55566835871404396, 0.51631533352584469, 0.50026385224274406, 0.53070832441686289, 0.53610822060353802], [776, 1615, 2356, 3053, 3828, 4598, 4695]], [[1.3432304859161377, 2.644713878631592, 3.81579327583313, 4.990963935852051, 6.299952268600464, 7.7253382205963135, 8.630343437194824], [0.6343713956170703, 0.60204498977505116, 0.54756222297988411, 0.50785340314136129, 0.49175970228601812, 0.51455888744024336, 0.52049007182087037], [776, 1615, 2356, 3053, 3828, 4598, 4695]], [[1.4008026123046875, 2.856863021850586, 4.171647310256958, 5.478260278701782, 6.914169549942017, 8.451325416564941, 9.453888654708862], [0.6322657176749703, 0.59741343345848974, 0.54728091444405957, 0.50441956393635834, 0.489247311827957, 0.51250548486178149, 0.51676275891522527], [776, 1615, 2356, 3053, 3828, 4598, 4695]], [[1.3942475318908691, 2.780060052871704, 4.043108701705933, 5.288461685180664, 6.653939247131348, 8.117255687713623, 9.018557071685791], [0.6322657176749703, 0.59042778483693348, 0.53469531525184921, 0.49536344600658083, 0.47824897400820798, 0.49595323741007197, 0.50207559536814506], [776, 1615, 2356, 3053, 3828, 4598, 4695]], [[1.3990931510925293, 2.8154714107513428, 4.1383585929870605, 5.442542314529419, 6.877676010131836, 8.374332904815674, 9.343263864517212], [0.6322657176749703, 0.58933107535986451, 0.53276955602537002, 0.49612403100775199, 0.47816593886462877, 0.4958492259367287, 0.49803235679930036], [776, 1615, 2356, 3053, 3828, 4598, 4695]]]
whole_level=[[[1.0210988521575928, 2.035581588745117, 3.050370693206787, 4.073584318161011, 5.102896451950073, 5.8546998500823975, 6.515467405319214, 7.2035744190216064, 7.887670278549194, 8.582525253295898, 9.28866720199585, 9.996066331863403, 11.04702353477478, 12.08986496925354, 13.188823938369751, 14.253443956375122, 15.415573835372925, 16.666669368743896, 17.94972014427185, 19.266839742660522, 20.602204084396362, 21.93460178375244, 23.26701068878174, 24.615485191345215, 26.00280523300171, 27.433255910873413, 28.866955041885376, 30.330921411514282, 31.918105840682983, 33.45623564720154, 35.0158965587616, 36.21329212188721, 37.41666650772095, 38.66067862510681, 39.92186164855957, 41.19664216041565, 42.48306751251221, 43.79458570480347, 45.15621829032898, 46.52580285072327, 47.916537046432495, 49.34329032897949, 50.78096842765808, 52.23378229141235, 53.737492084503174, 55.25271463394165, 56.787041425704956, 58.36060953140259, 59.98957705497742, 61.591429233551025, 63.2346670627594, 64.89067077636719, 66.60229516029358, 68.31071949005127, 70.05035257339478, 71.8265027999878, 73.61449813842773, 75.40557169914246, 77.24045729637146, 79.07018423080444, 80.92684745788574, 82.82012724876404, 84.74073839187622, 86.698899269104, 88.70100092887878, 90.7594301700592, 92.89245438575745, 95.1313214302063, 97.3377091884613, 99.58273077011108, 101.89416599273682, 104.18030500411987, 106.43512749671936, 108.73391461372375, 111.033123254776, 113.36193585395813, 115.72719192504883, 118.09853982925415, 120.50124382972717, 122.92003989219666, 125.42768406867981, 127.98733448982239, 130.54687571525574, 133.18859386444092, 135.7793312072754, 138.31369256973267, 140.85875988006592, 143.46292233467102, 146.13614654541016, 148.91108560562134, 151.86747884750366, 154.62911367416382, 157.3752248287201, 160.03250360488892, 162.815833568573, 165.7838020324707, 168.7106056213379, 171.60144567489624, 174.63437461853027, 177.68378043174744], [568, 1128, 1695, 2293, 2853, 3422, 3983, 4527, 5068, 5620, 6160, 6702, 7254, 7773, 8341, 8848, 9391, 9914, 10460, 11071, 11643, 12227, 12809, 13401, 13981, 14589, 15140, 15713, 16310, 16865, 17451, 18033, 18622, 19220, 19808, 20411, 20977, 21544, 22133, 22701, 23270, 23878, 24446, 25027, 25603, 26189, 26776, 27395, 27961, 28541, 29138, 29728, 30317, 30884, 31454, 32039, 32622, 33182, 33838, 34408, 34953, 35559, 36171, 36769, 37332, 37899, 38493, 39065, 39635, 40200, 40787, 41348, 41877, 42426, 42931, 43457, 43984, 44510, 45039, 45555, 46098, 46639, 47200, 47778, 48352, 48899, 49475, 49989, 50507, 51005, 51527, 52033, 52558, 53063, 53606, 54197, 54818, 55361, 55982, 56551]], [[2.0615766048431396, 4.202943563461304, 5.970611333847046, 7.805399656295776, 9.689878463745117, 11.761590003967285, 14.116955995559692, 16.469526529312134, 18.901306867599487, 21.407801151275635, 23.99396848678589, 26.332733631134033, 28.683494329452515, 31.141112327575684, 33.737231969833374, 36.39350509643555, 39.078325510025024, 41.738664865493774, 44.529074907302856, 47.48919677734375, 50.67085528373718, 53.64254355430603, 56.75423264503479, 59.97311329841614, 62.9306116104126, 65.99631214141846, 69.14079451560974, 72.39405751228333, 75.65821981430054, 78.98644137382507, 82.3945689201355, 85.9442048072815, 89.60328388214111, 92.80547046661377], [1695, 3422, 5068, 6702, 8341, 9914, 11643, 13401, 15140, 16865, 18622, 20411, 22133, 23878, 25603, 27395, 29138, 30884, 32622, 34408, 36171, 37899, 39635, 41348, 42927, 44510, 46098, 47778, 49475, 51005, 52558, 54197, 55982, 56551]], [[3.234867572784424, 6.237005710601807, 9.075754165649414, 12.360456228256226, 16.008789777755737, 19.881399631500244, 23.541887044906616, 27.275981664657593, 31.26670241355896, 35.35723066329956, 39.48598885536194, 43.77803945541382, 48.19754409790039, 52.678343296051025, 57.02920389175415, 61.239909648895264, 65.670245885849, 70.03880381584167, 74.58512568473816, 79.53456568717957], [2853, 5620, 8341, 11071, 13981, 16865, 19808, 22701, 25603, 28541, 31454, 34408, 37332, 40200, 42931, 45555, 48352, 51005, 53606, 56551]], [[4.473843574523926, 8.111481666564941, 12.643146991729736, 17.66252875328064, 22.869744539260864, 27.770950078964233, 32.875489711761475, 38.170334577560425, 43.83198523521423, 49.51588678359985, 54.89489245414734, 60.308509826660156, 65.96074318885803, 71.7628607749939, 75.27024960517883], [3983, 7773, 11643, 15713, 19808, 23878, 27961, 32039, 36171, 40200, 43984, 47778, 51527, 55361, 56551]], [[5.41196870803833, 10.211689949035645, 16.570540189743042, 23.327719688415527, 29.471654653549194, 36.027846336364746, 42.85844945907593, 49.67816376686096, 55.79549431800842, 62.032944679260254, 68.68690514564514, 71.66069459915161], [5068, 9914, 15140, 20411, 25603, 30884, 36171, 41348, 46098, 51005, 55982, 56551]], [[6.1930999755859375, 12.369072198867798, 19.64864230155945, 26.79195523262024, 34.23469161987305, 42.19078731536865, 49.73155188560486, 56.8388991355896, 64.41498565673828, 67.42342901229858], [6160, 12227, 18622, 25027, 31454, 37899, 43984, 49989, 55982, 56551]], [[7.009458780288696, 14.497271060943604, 22.611963033676147, 31.18707823753357, 40.049046993255615, 48.65992498397827, 57.03715682029724, 64.02893257141113], [7254, 14589, 22133, 29728, 37332, 44510, 51527, 56551]], [[8.00263524055481, 17.37148690223694, 26.92749047279358, 37.2563419342041, 47.65098977088928, 57.19252371788025, 64.72923636436462], [8341, 16865, 25603, 34408, 42931, 51005, 56551]], [[9.674890279769897, 21.84151601791382, 33.48647117614746, 45.40970182418823, 56.69023156166077, 67.3728404045105], [9391, 19220, 29138, 39065, 48352, 56551]], [[10.926369190216064, 24.29689335823059, 37.98102068901062, 51.14740824699402, 63.371161460876465, 68.99724674224854], [10460, 21544, 32622, 43457, 53606, 56551]], [[11.683632373809814, 26.436679124832153, 41.775489807128906, 55.16198801994324, 65.94784998893738], [11643, 23878, 36171, 47778, 56551]], [[12.2040855884552, 25.90646004676819, 40.343032121658325, 53.18468403816223, 59.50823760032654], [12809, 26189, 39635, 52033, 56551]], [[13.03706431388855, 28.374539375305176, 43.888831615448, 57.79676556587219], [13976, 28537, 42927, 56551]], [[14.830767631530762, 31.469793558120728, 47.70127534866333, 58.88616991043091], [15140, 30884, 46098, 56551]], [[14.39211392402649, 30.955931663513184, 46.67620277404785, 54.768691539764404], [16310, 33182, 49475, 56551]], [[15.454630851745605, 32.887070655822754, 49.00654435157776, 54.46300387382507], [17451, 35559, 52558, 56551]], [[16.37015175819397, 34.89595699310303, 51.87887096405029, 54.722715616226196], [18622, 37899, 55982, 56551]], [[17.400372743606567, 37.459108114242554, 53.64333200454712], [19808, 40200, 56551]], [[19.97440218925476, 41.53469181060791, 55.431267976760864], [20977, 42426, 56551]], [[20.088034868240356, 41.832497358322144, 54.059032917022705], [22133, 44510, 56551]], [[21.220967292785645, 43.50715899467468, 53.780986070632935], [23270, 46639, 56551]], [[21.856021881103516, 44.762301206588745, 53.338335037231445], [24446, 48899, 56551]], [[22.96186923980713, 46.533074617385864, 53.370240926742554], [25603, 51005, 56551]], [[24.1670241355896, 48.51562738418579, 53.771872758865356], [26776, 53063, 56551]], [[24.618711709976196, 49.88381791114807, 53.395296573638916], [27961, 55361, 56551]]]

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')

flatten_whole=[]
flatten_x=[]
flatten_y=[]
flatten_z=[]
for idx,level in enumerate(whole_level):

    # print(idx)
    exec_time=level[0]
    tweets_been_processed_list=level[1]
    batch_size =batch_size_recorder[idx]
    # print(batch_size)
    Xs = exec_time
    # print(Xs)
    flatten_x.extend(Xs)

    Ys = tweets_been_processed_list
    flatten_y.extend(Ys)
    # print(Ys)

    Zs = [batch_size] * len(Ys)
    flatten_z.extend(Zs)
    print(Zs)
    ax.plot(Zs, Ys, Xs, label='parametric curve')


# ======pr
## plot:

print(flatten_z)

surf = ax.plot_trisurf(flatten_z, flatten_y, flatten_x, cmap=cm.jet, linewidth=0)
# ax.plot(flatten_z, flatten_y, flatten_x, label='parametric curve')

# fig.colorbar(surf)

ax.set_xlabel('Batch Size')
ax.set_ylabel('Tweets been Processed')
ax.set_zlabel('Execution Time')
ax.xaxis.set_major_locator(MaxNLocator(5))
ax.yaxis.set_major_locator(MaxNLocator(6))
ax.zaxis.set_major_locator(MaxNLocator(5))

fig.tight_layout()

plt.show() # or:
# fig.savefig('3D.png')